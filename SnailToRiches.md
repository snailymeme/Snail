# План создания игры "Улитка к богатству" (Snail to Riches) - Telegram WebApp

## Общее описание проекта
"Улитка к богатству" (Snail to Riches) - это HTML5-игра в формате Telegram WebApp. Игрок делает ставку на одну из улиток, которые соревнуются, двигаясь по лабиринту к финишу. Каждая улитка обладает уникальным стилем движения. Если выбранная улитка побеждает, игрок получает награду.

## Цель проекта
Разработать **MVP (минимально жизнеспособный продукт)** игры, которая:
- Работает внутри Telegram WebApp
- Интегрируется с Solana-кошельком через Phantom
- Позволяет игроку делать ставки и получать выигрыш

## Структура MVP (первая рабочая версия)

### Основной функционал
- Игра загружается внутри Telegram WebApp
- Игрок выбирает одну из улиток и делает ставку (в токенах Solana)
- Улитки автоматически двигаются к финишу; их поведение определяется уникальными JS-модулями ("патчами")
- **Победа**: игрок получает **x2 от ставки**
- **Проигрыш**: ставка сгорает
- Интеграция с Solana-кошельком через Phantom

### Ключевые блоки
- **Telegram WebApp**: интерфейс на основе Canvas или DOM
- **Привязка Solana-кошелька**: для ставок и выплат
- **Визуализация гонки**: движение улиток, препятствия, финишная черта
- **Генерация лабиринта**: выбор из 10 готовых тем (HTML-шаблоны)

### Ограничения MVP
- Один игрок - одна гонка (без синхронизации с другими игроками)
- Без общего пула ставок и розыгрыша (будет добавлено позже)

---

## Компоненты игры

### Улитки (5 базовых)
Каждая улитка - это отдельный JS-модуль с уникальным поведением, эффектом и шансом на победу. Названия и цвета:

1. **racerSlug**  
   - Цвет: красный (`red snail.png`)  
   - Особенность: резкие ускорения, ориентирована на спринт.  
2. **explorerSlug**  
   - Цвет: зелёный (`green snail.png`)  
   - Особенность: обходит препятствия, анализирует путь.  
3. **snakeSlug**  
   - Цвет: синий (`blue snail.png`)  
   - Особенность: извивается, нестабильная, но гибкий маршрут.  
4. **stubbornSlug**  
   - Цвет: сиреневый (`lilac snail.png`)  
   - Особенность: может застрять, но потом делает рывок.  
5. **defaultSlug**  
   - Цвет: жёлтый (`yellow snail.png`)  
   - Особенность: сбалансированная, средняя скорость (используется как заглушка при ошибке выбора).  

> **Примечание**: Поведение улиток определяется патчами: `racerSlugPatch.js`, `explorerSlugPatch.js`, `snakeSlugPatch.js`, `stubbornSlugPatch.js`, `defaultSlugPatch.js`. Загрузка патчей через `patchLoader.js`.

### Лабиринт
- Размер: **20x20 клеток**
- Генерация: случайная или выбор из 10 готовых тем (HTML-шаблоны)
- Препятствия: болотные клетки, ловушки, ускорители, порталы
- Визуальная тема: зависит от выбранного шаблона (HTML + CSS)

### Интерфейс
1. **Стартовый экран**: выбор улитки и ставки
2. **Экран гонки**: анимация движения улиток (или фреймовая имитация)
3. **Экран результата**: победа/проигрыш + кнопка "Повторить"

---

## Механика ставок (MVP)
- Игрок привязывает Solana-кошелёк
- Делает ставку в токенах Solana
- **Условия**:  
  - Победа выбранной улитки: выигрыш **x2 от ставки**
  - Проигрыш: ставка сгорает
- Интеграция с Solana через Phantom Wallet SDK (через `web3.js`)
- Функции:  
  - Проверка баланса
  - Списание ставки
  - Начисление выигрыша
- Реализация:  
  - Простейший backend или прямое взаимодействие с блокчейном через подписанные вызовы

---

## Расширенная версия (вторая фаза)

### Турниры по расписанию
- **Частота**: каждые 5-10 минут собирается пул ставок
- **Распределение пула**:  
  - 30% - комиссия
  - 70% - призовой фонд:  
    - 1 место: 70%
    - 2 место: 50% от своей ставки
    - 3 место: 25% от своей ставки
    - 4-5 место: проигрыш

### Реализация
- Сбор ставок в течение таймера
- Сервер или блокчейн хранит и обрабатывает гонку
- Отправка транзакций и распределение выигрышей

---

## Возможности развития
- **NFT-улитки**: уникальные персонажи с особыми характеристиками
- **Прокачка улиток**: улучшение скорости, манёвренности и т.д.
- **Кастомизация лабиринта**: создание собственных треков
- **Социальные функции**: лидерборд, прогнозы, репосты в Telegram
- **Мультичейн**: поддержка TON-кошельков и других блокчейнов

---

## Документация и технологии

### Web
- [Telegram Web Apps](https://core.telegram.org/bots/webapps) - документация по Telegram WebApp
- [Vercel Hosting](https://vercel.com/docs) - хостинг приложения
- [ngrok Tunneling](https://ngrok.com/docs) - для локальной разработки

### Blockchain
- [Solana Web3.js](https://solana-labs.github.io/solana-web3.js/) - работа с Solana
- [Phantom Wallet](https://docs.phantom.app/) - интеграция кошелька
- [TON Connect](https://docs.ton.org/develop/dapps/ton-connect) - для будущей поддержки TON

### Инструменты разработки
- **HTML/CSS/JS**: Canvas API или DOM для интерфейса и анимаций
- **GitHub**: репозиторий проекта

---

## Дополнительные замечания
- Этот документ - основа проекта. Все изменения и дополнения будут вноситься сюда по мере разработки
- Формат Markdown обеспечивает совместимость с Cursor и удобство обновления